{% extends "base.html" %}

{% block title %}
<title>스터디메이트 추천</title>
{% endblock %}

{% block style %}
<!--이 곳에 style에 해당하는 코드 (css파일 연결 등) 작성-->
{% endblock %}

{% block content %}
<!--이 곳에 페이지의 내용 작성-->
  <nav class="navbar navbar-expand-md navbar-dark fixed-top" style="background:#ffbbb1;">
    <a class="navbar-brand" href="{% url 'home' %}" >Home</a>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item justify-content-end">
          <a class="nav-link" href="{% url 'team_rec:team_rec_list' user.pk %}">teammate</a>
        </li>
        <li class="nav-item justify-content-end">
          <a class="nav-link" href="{% url 'edit:edit' user.customer.pk %}">mypage</a>
        </li>
      </ul>
      <a class="nav-link my-2 my-sm-0" style="color:white;" href="{% url 'users:logout' %}">signout</a>
    </div>
  </nav>

  <br>
  <br>
  <table class="table">
    <thead class="table-light text-center">
      <tr>
        <th style="width: 20%" scope="col">추천 순위</th>
        <th style="width: 20%" scope="col">이름</th>
        <th style="width: 40%" scope="col">스터디선호도</th>
        <th style="width: 20%" scope="col">신청</th>
      </tr>
    </thead>
    <tbody class="text-center">
      {% for customer in recommend_customer_list %}
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">요청 확인메세지</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              {{customer.name}} 님께 요청을 보내시겠습니까?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Close</button>
              <form action="{% url 'alarm:alarm_list' customer.pk %}" method = 'POST'>
              {% csrf_token %}
              <button type="submit" class="btn btn-outline-primary">요청 보내기</button></form>
            </div>
          </div>
        </div>
      </div>
       <tr>
        <th class="align-middle" style="width: 20%" scope="row">{{forloop.counter}}</th>
        <td class="align-middle" style="width: 20%">{{customer.name}}</td>
        <td style="width: 40%"><img src="/static/study_graph_{{customer.pk}}.png" alt=""></td>
        <td class="align-middle" style="width: 20%">
          <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#exampleModal">스터디메이트 요청</a>
        </td>
      </tr>       
      {% endfor %}
    </tbody>
  </table>





{% endblock %}