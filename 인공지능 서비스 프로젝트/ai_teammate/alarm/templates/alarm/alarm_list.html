{% extends "base.html" %}

{% block title %}
<title>알람 리스트</title>
{% endblock %}

{% block style %}
<!--이 곳에 style에 해당하는 코드 (css파일 연결 등) 작성-->
{% endblock %}

{% block content %}
<!--이 곳에 페이지의 내용 작성-->
  <nav class="navbar navbar-expand-md navbar-dark fixed-top" style="background:#ffbbb1;">
    <a class="navbar-brand" href="{% url 'home' %}" >Home</a>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item justify-content-end">
          <a class="nav-link" href="{% url 'edit:info_edit' user.customer.pk %}">mypage</a>
        </li>
      </ul>
      <a class="nav-link my-2 my-sm-0" style="color:white;" href="{% url 'users:logout' %}">signout</a>
    </div>
  </nav>
  <br/>
  <br/>
  <br/>

  <div class="row mb-2" style="margin-left:5px; margin-right:5px">
    <div class="col-md-6">
      <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
        <div class="col p-4 d-flex flex-column position-static">
          <strong class="d-inline-block mb-2 text-info">Teammate request</strong>
          <br>
          {% if message_list|length == 0 %}
            <div class="mb-1 text-muted">미확인요청 없음</div>
          {% else %}
            {% for message in message_list %}
              <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
              <div class="col p-4 d-flex flex-column position-static">
              <div class="mb-1 text-muted">{{message.sentAt}}</div>
              {% if message.contents|length == 0 %}
              <p class="card-text mb-auto">내용없음</p>
              {% else %}
              <p class="card-text mb-auto">{{message.contents}}</p>
              {% endif %}  
              <br> 
              <!-- Button trigger modal -->
              <p class="card-text mb-auto">From. <a href="#" data-toggle="modal" data-target="#exampleModal">{{message.sender}}</a></p>

              <!-- Modal -->
              <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">{{message.sender_foreignKey.name}}님의 자기소개</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      {{message.sender_foreignKey.intro}}
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>   
              <br>
              <a href="{% url 'alarm:del_alarm' message.pk %}" style="width:15%;" class="btn btn-outline-dark pull-right">삭제</a>
              </div> 
              </div>      
            {%endfor%}
          {% endif %}
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
        <div class="col p-4 d-flex flex-column position-static">
          <strong class="d-inline-block mb-2 text-info">Studymate request</strong>
          <br>
          {% if message_list2|length == 0 %}
            <div class="mb-1 text-muted">미확인요청 없음</div>
          {% else %}
            {% for message in message_list2 %}
              <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
              <div class="col p-4 d-flex flex-column position-static">
              <div class="mb-1 text-muted">{{message.sentAt}}</div>
              {% if message.contents|length == 0 %}
              <p class="card-text mb-auto">내용없음</p>
              {% else %}
              <p class="card-text mb-auto">{{message.contents}}</p>
              {% endif %}  
              <br> 
              <!-- Button trigger modal -->
              <p class="card-text mb-auto">From. <a href="#" data-toggle="modal" data-target="#exampleModal">{{message.sender}}</a></p>

              <!-- Modal -->
              <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">{{message.sender_foreignKey.name}}님의 정보</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      {{message.sender_foreignKey.intro}}
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>   
              <br>
              <a href="{% url 'alarm:del_alarm2' message.pk %}" style="width:15%;" class="btn btn-outline-dark">삭제</a>
              </div> 
              </div>      
            {%endfor%}
          {% endif %}
        </div>
      </div>
    </div>
  </div>

{% endblock %}
